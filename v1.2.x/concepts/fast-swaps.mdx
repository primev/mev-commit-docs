---
title: "FastSwaps"
sidebarTitle: "FastSwaps"
description: "How FastSwaps enables token swaps on Ethereum with MEV reward redistribution"
icon: "arrows-rotate"
---

FastSwaps is a swap interface built on top of [Fast Protocol](/v1.2.x/concepts/fast-protocol) that lets users trade tokens on Ethereum mainnet while earning MEV rewards. Unlike traditional DEX frontends where MEV is extracted from traders, FastSwaps routes swaps through the [FAST RPC](/v1.2.x/get-started/fastrpc) and settles them via the **FastSettlement** smart contracts, redistributing captured MEV back to users as **Fast Miles**.

<Card title="Launch FastSwaps" icon="bolt" href="https://fastprotocol.io" horizontal>
  Start swapping at fastprotocol.io
</Card>

---

# How FastSwaps Works

## Overview

When a user initiates a swap on FastSwaps, the following happens:

1. The app queries **Uniswap V3 Quoter V2** across multiple fee tiers to find the best price
2. The user signs an **EIP-712 intent** (for ERC-20 tokens) or submits a direct transaction (for ETH)
3. A relayer picks up the signed intent and executes it through the **FastSettlement** contract on Ethereum
4. The FastSettlement contract routes the swap through the best available liquidity (currently Uniswap V3 pools)
5. MEV generated from the swap is captured by Fast Protocol and redistributed to the user as Fast Miles

The swap flow is designed to feel like any familiar DEX — select tokens, enter an amount, review the quote, confirm. The key difference is the settlement layer: instead of the user submitting a swap transaction directly to a DEX router, FastSwaps uses an intent-based architecture where a relayer executes the trade on the user's behalf.

---

## Execution Paths

FastSwaps supports two execution paths depending on the input token:

| Input Token | Path | User Action | Gas |
| ----------- | ---- | ----------- | --- |
| **ERC-20** (e.g., USDC, DAI, WBTC) | Permit2 | Sign an off-chain EIP-712 message | No gas required from the user |
| **ETH** | Direct | Submit a transaction from wallet | User pays gas |

### ERC-20 Path (Permit2)

For ERC-20 token swaps, FastSwaps uses [Uniswap's Permit2](https://docs.uniswap.org/contracts/permit2/overview) contract to enable gasless, signature-based token transfers.

<Steps>
  <Step title="One-time Permit2 approval">
    The first time you swap a given ERC-20 token, you must approve the Permit2 contract to spend that token. This is a standard ERC-20 `approve` transaction. If you've already approved the token for Permit2 on another application (like Uniswap), no additional approval is needed.
  </Step>
  <Step title="Sign the swap intent">
    For each swap, you sign an off-chain EIP-712 typed data message. This message encodes a `PermitWitnessTransferFrom` that includes:
    - The **token permission** (which token and how much the relayer can transfer)
    - A **witness** containing your `Intent` struct (input/output tokens, amounts, recipient, deadline, nonce)

    No gas is required for this step — it is only a signature.
  </Step>
  <Step title="Relayer executes the swap">
    The relayer receives your signed intent and calls `executeWithPermit` on the FastSettlement contract. The contract:
    1. Verifies your Permit2 signature
    2. Transfers your input tokens via Permit2
    3. Executes the swap through the best available DEX route
    4. Sends the output tokens to your wallet
    5. Returns any surplus to the protocol for MEV redistribution
  </Step>
</Steps>

### ETH Path

When swapping ETH as the input token, the user submits a transaction directly:

<Steps>
  <Step title="Submit the swap transaction">
    The user signs and broadcasts a transaction that calls `executeWithETH` on the FastSettlement contract, sending ETH along with the call.
  </Step>
  <Step title="Contract executes the swap">
    The FastSettlement contract wraps the ETH to WETH if needed, executes the swap through the DEX route, and sends the output tokens to the user's wallet.
  </Step>
</Steps>

<Info>
In both paths, the relayer or user transaction is routed through the FAST RPC, which enables mev-commit preconfirmations and MEV capture.
</Info>

---

## Pricing & Quoting

FastSwaps fetches real-time quotes from the **Uniswap V3 Quoter V2** contract on Ethereum mainnet. For each swap request, the system:

1. **Queries multiple fee tiers in parallel** — Uniswap V3 pools exist at 0.05%, 0.30%, and 1.00% fee tiers. FastSwaps queries all three simultaneously and selects the tier that returns the best output amount.

2. **Estimates gas costs** — Each quote includes a gas estimate so the user can see the total cost of the swap.

3. **Calculates price impact** — The difference between the quoted price and the mid-market price is displayed to the user. Price impact severity is color-coded:
   - **Green** — Less than 0.1% (negligible)
   - **Yellow** — 0.1% to 1% (moderate)
   - **Red** — Greater than 1% (significant)

4. **Refreshes every 15 seconds** — Quotes have a 15-second validity window. A countdown timer in the UI shows when the next refresh will occur. Users can also manually refresh at any time.

### Slippage Protection

Users can configure slippage tolerance to protect against price movement between quoting and execution:

| Setting | Description |
| ------- | ----------- |
| **Auto** | The system calculates an appropriate slippage based on the token pair and current market conditions |
| **Custom** | The user sets a specific percentage (e.g., 0.5%, 1%, 3%) |

The slippage tolerance is encoded into the `userAmtOut` (minimum output amount) field of the swap intent. If the swap would result in less than this minimum, the transaction reverts.

### Transaction Deadline

Each swap intent includes a deadline timestamp. If the relayer does not execute the swap before this deadline, the intent expires and cannot be executed. Users can configure the deadline from 5 minutes to 24 hours.

---

## Smart Contracts

FastSwaps is powered by smart contracts deployed on **Ethereum L1** (Chain ID: 1).

### FastSettlement V3

The core settlement contract that executes swaps on behalf of users.

| Property | Value |
| -------- | ----- |
| **Contract** | FastSettlementV3 (Upgradeable Proxy) |
| **Network** | Ethereum Mainnet (Chain ID: 1) |
| **Proxy Address** | [`0x084C0EC7f5C0585195c1c713ED9f06272F48cB45`](https://etherscan.io/address/0x084C0EC7f5C0585195c1c713ED9f06272F48cB45#code) |
| **Implementation Address** | [`0x9bc916d7cf71ac34e3d407d8ed8838071a3b6ebf`](https://etherscan.io/address/0x9bc916d7cf71ac34e3d407d8ed8838071a3b6ebf#code) |
| **Source** | [GitHub](https://github.com/primev/mev-commit) |

#### Functions

**`executeWithETH(intent, swapData)`**

Executes a swap where ETH is the input token. The user sends ETH with the transaction.

```solidity
function executeWithETH(
    Intent calldata intent,
    SwapCall calldata swapData
) external payable returns (uint256 received, uint256 surplus);
```

**`executeWithPermit(intent, signature, swapData)`**

Executes a swap where an ERC-20 token is the input. The relayer provides the user's Permit2 signature.

```solidity
function executeWithPermit(
    Intent calldata intent,
    bytes calldata signature,
    SwapCall calldata swapData
) external returns (uint256 received, uint256 surplus);
```

#### Data Structures

**Intent** — Encodes the user's swap parameters:

```solidity
struct Intent {
    address user;         // The user initiating the swap
    address inputToken;   // Token being sold
    address outputToken;  // Token being bought
    uint256 inputAmt;     // Amount of input token
    uint256 userAmtOut;   // Minimum output amount (slippage protection)
    address recipient;    // Address receiving the output tokens
    uint256 deadline;     // Unix timestamp after which the intent expires
    uint256 nonce;        // Permit2 nonce (prevents replay)
}
```

**SwapCall** — Encodes the DEX routing data:

```solidity
struct SwapCall {
    address to;    // Target DEX router contract
    uint256 value; // ETH value to send (if applicable)
    bytes data;    // Encoded swap calldata for the router
}
```

### Permit2

FastSwaps uses Uniswap's canonical [Permit2](https://docs.uniswap.org/contracts/permit2/overview) contract for gasless ERC-20 approvals.

| Property | Value |
| -------- | ----- |
| **Contract** | Permit2 |
| **Network** | Ethereum Mainnet |
| **Address** | `0x000000000022D473030F116dDEE9F6B43aC78BA3` |
| **Source** | [GitHub](https://github.com/Uniswap/permit2) |

Permit2 allows users to approve a token once and then sign off-chain messages (EIP-712) for subsequent transfers. This eliminates the need for per-swap on-chain approval transactions.

### Uniswap V3 Quoter V2

Used for real-time price quotes. This is a read-only contract — it simulates swaps without executing them.

| Property | Value |
| -------- | ----- |
| **Contract** | QuoterV2 |
| **Network** | Ethereum Mainnet |
| **Address** | `0x61fFE014bA17989E743c5F6cB21bF9697530B21` |
| **Source** | [GitHub](https://github.com/Uniswap/v3-periphery) |

---

## EIP-712 Signing

For ERC-20 swaps, FastSwaps constructs an EIP-712 typed data message that combines a Permit2 transfer with a swap intent witness. The signing domain is:

```json
{
  "name": "Permit2",
  "chainId": 1,
  "verifyingContract": "0x000000000022D473030F116dDEE9F6B43aC78BA3"
}
```

The typed data includes:

- **PermitWitnessTransferFrom** — Standard Permit2 transfer with an additional witness field
- **TokenPermissions** — Specifies which token and amount the relayer can transfer
- **Intent** (witness) — The full swap parameters that the FastSettlement contract will verify on-chain

This design ensures the relayer can only execute the exact swap the user intended. The signature covers both the token transfer authorization and the swap parameters, preventing any modification of the swap terms after signing.

---

## Supported Tokens

FastSwaps supports over **2,400 ERC-20 tokens** on Ethereum mainnet. Any token with liquidity on Uniswap V3 can be traded. The token list includes:

- **Major tokens**: ETH, WETH, USDC, USDT, DAI, WBTC
- **DeFi tokens**: UNI, AAVE, LINK, MKR, SNX, COMP
- **Meme tokens**: PEPE, SHIB, DOGE (wrapped)
- **Custom tokens**: Users can add any ERC-20 token by entering its contract address

<Warning>
Always verify the contract address when adding custom tokens. FastSwaps does not verify the legitimacy of user-added tokens.
</Warning>

---

## Fast Miles

Users earn **Fast Miles** proportional to the MEV their swaps generate through Fast Protocol. The MEV distribution model is detailed in the [Fast Protocol Economics](/v1.2.x/concepts/fast-protocol) page.

Key points:
- Users receive **at least 90%** of the MEV their transactions generate under normal conditions
- Fast Miles are tracked in the FastSwaps dashboard and leaderboard
- Miles are planned to be tokenized — early users accumulate before the official points system launches
- Bonus miles are available through referrals and one-time tasks in the app

For a full explanation of MEV distribution, fee parameters, and the adaptive parameter model, see [Fast Protocol](/v1.2.x/concepts/fast-protocol).

---

## Architecture Diagram

The following shows how a swap flows through the FastSwaps system:

```
User                    FastSwaps App              FAST RPC / Relayer        Ethereum L1
 │                          │                            │                       │
 │  1. Select tokens &      │                            │                       │
 │     enter amount         │                            │                       │
 │ ─────────────────────>   │                            │                       │
 │                          │  2. Query Uniswap V3       │                       │
 │                          │     Quoter (3 fee tiers)   │                       │
 │                          │ ───────────────────────────────────────────────>    │
 │                          │                            │                       │
 │  3. Review quote &       │  <── Best quote returned ──────────────────────    │
 │     confirm              │                            │                       │
 │ ─────────────────────>   │                            │                       │
 │                          │                            │                       │
 │  4. Sign EIP-712         │                            │                       │
 │     intent (wallet)      │                            │                       │
 │ ─────────────────────>   │                            │                       │
 │                          │  5. Submit signed intent    │                       │
 │                          │ ──────────────────────────> │                       │
 │                          │                            │  6. Execute via        │
 │                          │                            │     FastSettlement     │
 │                          │                            │ ────────────────────>  │
 │                          │                            │                       │
 │                          │                            │  7. Swap settles,      │
 │                          │                            │     output tokens to   │
 │                          │                            │     user, surplus      │
 │                          │                            │     captured for MEV   │
 │                          │                            │ <────────────────────  │
 │                          │                            │                       │
 │  8. Confirmation         │  <── Tx confirmed ──────── │                       │
 │     + Fast Miles earned  │                            │                       │
 │ <─────────────────────   │                            │                       │
```

---

## Comparison with Traditional DEX Frontends

| Feature | Traditional DEX (e.g., Uniswap App) | FastSwaps |
| ------- | ----------------------------------- | --------- |
| **Token selection** | User selects tokens | User selects tokens |
| **Pricing** | Uniswap V3 Quoter | Uniswap V3 Quoter (same pools) |
| **Transaction submission** | User submits directly to public mempool | Intent signed off-chain, relayer executes via FAST RPC |
| **MEV exposure** | User's swap is visible in mempool; bots can front-run/sandwich | Swap routed through FAST RPC; MEV is captured and redistributed |
| **MEV rewards** | None | User earns Fast Miles proportional to MEV generated |
| **Gas for ERC-20 swaps** | User pays gas | Relayer pays gas (gasless for user) |
| **Settlement** | Direct DEX router call | FastSettlement contract with surplus capture |
| **Preconfirmations** | None | Transaction preconfirmed via mev-commit network |

---

## Security Considerations

- **Intent signing is non-custodial.** The user's wallet signs an EIP-712 message authorizing a specific swap with specific parameters. The relayer cannot modify the intent (tokens, amounts, recipient, deadline) after signing.
- **Permit2 nonces prevent replay.** Each signed intent uses a unique nonce from the Permit2 nonce bitmap. A used nonce cannot be reused.
- **Deadline enforcement.** Intents expire after the user-specified deadline. Stale intents cannot be executed.
- **Minimum output protection.** The `userAmtOut` field ensures the user receives at least the expected amount minus slippage tolerance. If the swap would produce less, the transaction reverts.
- **Smart contract audits.** The FastSettlement contracts are [open source](https://github.com/primev/mev-commit) and subject to security review.
